language: go
sudo: false
matrix:
  include:
  - go: 1.x
    env: LATEST=true
  - go: tip
  allow_failures:
  - go: tip
before_install:
- go get github.com/mitchellh/gox github.com/tcnksm/ghr github.com/Fyb3roptik/swaggomnia/models github.com/ghodss/yaml github.com/urfave/cli
install:
-
script:
- if [ "${LATEST}" = "true" ]; then gox -os="linux darwin windows openbsd freebsd"
  -arch="amd64" -output="logshare.." -ldflags "-X main.Rev=`git rev-parse --short
  HEAD`" -verbose ./...; fi
deploy:
  - provider: releases
    skip_cleanup: true
    api_key:
      secure: ll6md8bXRQ9l5m1x68iou/pcEIW/2apWIxrSwI8ehA+jsx85Zyua8YOsKCaxpOAozXrCA5p4EWIWu+haboRZL5j8viCYqwQKAZW3slyhAtQDp2EGmWXxTOHEPOZF2TsTd0hT245yKNKXnZij+RX48NOXkKlUGMiQfa90cVKuV3f9AsURd/WRsGZ1Q5PODhX3AB7XPuxOsqtMK5g65alixYDb$
    file:
    - swaggomnia.windows.amd64.exe
    - swaggomnia.darwin.amd64
    - swaggomnia.linux.amd64
    - swaggomnia.openbsd.amd64
    - swaggomnia.freebsd.amd64
    on:
      repo: Fyb3roptik/swaggomnia
      tags: true
      condition: "$LATEST = true"
